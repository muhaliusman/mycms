!function(t,e,n){var i={$ul:null,tmpl:null,spinner:null,data:{id:null,dbId:null,label:null,link:null,menu_Id:null,depth:0,order:0,parent:"",type:"custome"},init:function(){var e=i;e.$ul=t("ul#menu-to-edit"),e.tmpl=_.template(t("#tmpl-menu-item").html()),e.data.menu_Id=t("input#idmenu").val(),t(".submit-add-to-menu").click(e.addItem)},addItem:function(){if(!t(this).closest("#menu-settings-column").hasClass("metabox-holder-disabled")){var e=i,n=t(this).closest(".control-section");e.spinner=n.find(".spinner").show(),e[n.data("metaType")](n)}},appendItem:function(t){if(t)if(_.isArray(t)){var e=this;_.each(t,function(t){e.$ul.append(e.tmpl({item:t}))})}else this.$ul.append(this.tmpl({item:t}));this.spinner.hide()},customeItem:function(t){var n=t.find("input#custom-menu-item-url").val(),i=t.find("input#custom-menu-item-name").val();if(!n||!i)return t.find("#customlinkdiv").addClass("form-invalid"),this.spinner.hide();var l=_.extend({},this.data,{id:e(),link:n,label:i});this.addItemToDb([l])},postItem:function(n){var i=[],l=this;if(n.find(".categorychecklist > li > label > input.menu-item-checkbox:checked").each(function(){var n={id:e(),term_title:""};t(this).nextAll("input").each(function(){var e=t(this);n[e.attr("name")]=e.val(),"label"==e.attr("name")&&(n.term_title=e.val())}),i.push(_.extend({},l.data,n))}),_.isEmpty(i))return l.spinner.hide();l.addItemToDb(i)},addItemToDb:function(e){var i=this;t.post(n,{items:e},function(t){i.appendItem(t)},"json").fail(function(){i.spinner.hide()})}};t(document).ready(i.init),t(document).on("click",".delete-action .menu-delete",function(){return confirm("Do you want to delete this menu ?")})}(jQuery,window.WCB.helper.uniqId,window.addItemUrl);